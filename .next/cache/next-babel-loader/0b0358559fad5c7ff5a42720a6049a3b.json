{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _unfetch = _interopRequireDefault(require(\"next/dist/build/polyfills/unfetch\"));\nvar _eventSourcePolyfill = _interopRequireDefault(require(\"./event-source-polyfill\"));\nvar _eventsource = require(\"./error-overlay/eventsource\");\nvar _onDemandEntriesUtils = require(\"./on-demand-entries-utils\");\nvar _fouc = require(\"./fouc\"); /* globals __webpack_hash__ */\nif (!window.EventSource) {\n  window.EventSource = _eventSourcePolyfill.default;\n}\nconst data = JSON.parse(document.getElementById('__NEXT_DATA__').textContent);\nlet {\n  assetPrefix,\n  page\n} = data;\nassetPrefix = assetPrefix || '';\nlet mostRecentHash = null; /* eslint-disable-next-line */\nlet curHash = __webpack_hash__;\nconst hotUpdatePath = assetPrefix + (assetPrefix.endsWith('/') ? '' : '/') + '_next/static/webpack/'; // Is there a newer version of this code available?\nfunction isUpdateAvailable() {\n  // __webpack_hash__ is the hash of the current compilation.\n  // It's a global variable injected by Webpack.\n  /* eslint-disable-next-line */\n  return mostRecentHash !== __webpack_hash__;\n} // Webpack disallows updates in other states.\nfunction canApplyUpdates() {\n  return module.hot.status() === 'idle';\n} // This function reads code updates on the fly and hard\n// reloads the page when it has changed.\nasync function tryApplyUpdates() {\n  if (!isUpdateAvailable() || !canApplyUpdates()) {\n    return;\n  }\n  try {\n    const res = await (0, _unfetch.default)(`${hotUpdatePath}${curHash}.hot-update.json`);\n    const jsonData = await res.json();\n    const curPage = page === '/' ? 'index' : page; // webpack 5 uses an array instead\n    const pageUpdated = (Array.isArray(jsonData.c) ? jsonData.c : Object.keys(jsonData.c)).some(mod => {\n      return mod.indexOf(`pages${curPage.substr(0, 1) === '/' ? curPage : `/${curPage}`}`) !== -1 || mod.indexOf(`pages${curPage.substr(0, 1) === '/' ? curPage : `/${curPage}`}`.replace(/\\//g, '\\\\')) !== -1;\n    });\n    if (pageUpdated) {\n      document.location.reload(true);\n    } else {\n      curHash = mostRecentHash;\n    }\n  } catch (err) {\n    console.error('Error occurred checking for update', err);\n    document.location.reload(true);\n  }\n}\n(0, _eventsource.getEventSourceWrapper)({\n  path: `${assetPrefix}/_next/webpack-hmr`\n}).addMessageListener(event => {\n  if (event.data === '\\uD83D\\uDC93') {\n    return;\n  }\n  try {\n    const message = JSON.parse(event.data);\n    if (message.action === 'sync' || message.action === 'built') {\n      if (!message.hash) {\n        return;\n      }\n      mostRecentHash = message.hash;\n      tryApplyUpdates();\n    } else if (message.action === 'reloadPage') {\n      document.location.reload(true);\n    }\n  } catch (ex) {\n    console.warn('Invalid HMR message: ' + event.data + '\\n' + ex);\n  }\n});\n(0, _onDemandEntriesUtils.setupPing)(assetPrefix, () => page);\n(0, _fouc.displayContent)();","map":{"version":3,"sources":["../../../client/dev/amp-dev.js"],"names":["window","EventSource","EventSourcePolyfill","data","JSON","parse","document","getElementById","textContent","assetPrefix","page","mostRecentHash","curHash","__webpack_hash__","hotUpdatePath","endsWith","isUpdateAvailable","canApplyUpdates","module","hot","status","tryApplyUpdates","res","jsonData","json","curPage","pageUpdated","Array","isArray","c","Object","keys","some","mod","indexOf","substr","replace","location","reload","err","console","error","path","addMessageListener","event","message","action","hash","ex","warn"],"mappings":";;;AACA,IAAA,QAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,mCAAA,CAAA,CAAA;AACA,IAAA,oBAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,yBAAA,CAAA,CAAA;AACA,IAAA,YAAA,GAAA,OAAA,CAAA,6BAAA,CAAA;AACA,IAAA,qBAAA,GAAA,OAAA,CAAA,2BAAA,CAAA;AACA,IAAA,KAAA,GAAA,OAAA,CAAA,QAAA,CAAA,CALA;AAOA,IAAI,CAACA,MAAM,CAACC,WAAZ,EAAyB;EACvBD,MAAM,CAACC,WAAPD,GAAqBE,oBAAAA,CAAAA,OAArBF;AACD;AAED,MAAMG,IAAI,GAAGC,IAAI,CAACC,KAALD,CAAWE,QAAQ,CAACC,cAATD,CAAwB,eAAxBA,CAAAA,CAAyCE,WAApDJ,CAAb;AACA,IAAI;EAAEK,WAAF;EAAeC;AAAf,CAAA,GAAwBP,IAA5B;AACAM,WAAW,GAAGA,WAAW,IAAI,EAA7BA;AACA,IAAIE,cAAc,GAAG,IAArB,CACA;AACA,IAAIC,OAAO,GAAGC,gBAAd;AACA,MAAMC,aAAa,GACjBL,WAAW,IAAIA,WAAW,CAACM,QAAZN,CAAqB,GAArBA,CAAAA,GAA4B,EAA5BA,GAAiC,GAArC,CAAXA,GAAuD,uBADzD,CAGA;AACA,SAASO,iBAAT,CAAA,EAA6B;EAC3B;EACA;EACA;EACA,OAAOL,cAAc,KAAKE,gBAA1B;AACD,CAED;AACA,SAASI,eAAT,CAAA,EAA2B;EACzB,OAAOC,MAAM,CAACC,GAAPD,CAAWE,MAAXF,CAAAA,CAAAA,KAAwB,MAA/B;AACD,CAED;AACA;AACA,eAAeG,eAAf,CAAA,EAAiC;EAC/B,IAAI,CAACL,iBAAiB,CAAA,CAAlB,IAAwB,CAACC,eAAe,CAAA,CAA5C,EAAgD;IAC9C;EACD;EACD,IAAI;IACF,MAAMK,GAAG,GAAG,MAAM,CAAA,CAAA,EAAA,QAAA,CAAA,OAAA,EAAO,GAAER,aAAc,GAAEF,OAAQ,kBAAjC,CAAlB;IACA,MAAMW,QAAQ,GAAG,MAAMD,GAAG,CAACE,IAAJF,CAAAA,CAAvB;IACA,MAAMG,OAAO,GAAGf,IAAI,KAAK,GAATA,GAAe,OAAfA,GAAyBA,IAAzC,CACA;IACA,MAAMgB,WAAW,GAAG,CAACC,KAAK,CAACC,OAAND,CAAcJ,QAAQ,CAACM,CAAvBF,CAAAA,GACjBJ,QAAQ,CAACM,CADQF,GAEjBG,MAAM,CAACC,IAAPD,CAAYP,QAAQ,CAACM,CAArBC,CAFgB,EAGlBE,IAHkB,CAGZC,GAAD,IAAS;MACd,OACEA,GAAG,CAACC,OAAJD,CACG,QAAOR,OAAO,CAACU,MAARV,CAAe,CAAfA,EAAkB,CAAlBA,CAAAA,KAAyB,GAAzBA,GAA+BA,OAA/BA,GAA0C,IAAGA,OAAQ,EAAE,EADjEQ,CAAAA,KAEM,CAAC,CAFPA,IAGAA,GAAG,CAACC,OAAJD,CACG,QACCR,OAAO,CAACU,MAARV,CAAe,CAAfA,EAAkB,CAAlBA,CAAAA,KAAyB,GAAzBA,GAA+BA,OAA/BA,GAA0C,IAAGA,OAAQ,EACtD,EAFD,CAEGW,OAFH,CAEW,KAFX,EAEkB,IAFlB,CADFH,CAAAA,KAIM,CAAC,CART;IAUD,CAdmB,CAApB;IAgBA,IAAIP,WAAJ,EAAiB;MACfpB,QAAQ,CAAC+B,QAAT/B,CAAkBgC,MAAlBhC,CAAyB,IAAzBA,CAAAA;IACD,CAFD,MAEO;MACLM,OAAO,GAAGD,cAAVC;IACD;EACF,CAAC,QAAO2B,GAAP,EAAY;IACZC,OAAO,CAACC,KAARD,CAAc,oCAAdA,EAAoDD,GAApDC,CAAAA;IACAlC,QAAQ,CAAC+B,QAAT/B,CAAkBgC,MAAlBhC,CAAyB,IAAzBA,CAAAA;EACD;AACF;AAED,CAAA,CAAA,EAAA,YAAA,CAAA,qBAAA,EAAsB;EACpBoC,IAAI,EAAG,GAAEjC,WAAY;AADD,CAAtB,CAAA,CAEGkC,kBAFH,CAEuBC,KAAD,IAAW;EAC/B,IAAIA,KAAK,CAACzC,IAANyC,KAAe,cAAnB,EAAmC;IACjC;EACD;EAED,IAAI;IACF,MAAMC,OAAO,GAAGzC,IAAI,CAACC,KAALD,CAAWwC,KAAK,CAACzC,IAAjBC,CAAhB;IAEA,IAAIyC,OAAO,CAACC,MAARD,KAAmB,MAAnBA,IAA6BA,OAAO,CAACC,MAARD,KAAmB,OAApD,EAA6D;MAC3D,IAAI,CAACA,OAAO,CAACE,IAAb,EAAmB;QACjB;MACD;MACDpC,cAAc,GAAGkC,OAAO,CAACE,IAAzBpC;MACAU,eAAe,CAAA,CAAA;IAChB,CAND,MAMO,IAAIwB,OAAO,CAACC,MAARD,KAAmB,YAAvB,EAAqC;MAC1CvC,QAAQ,CAAC+B,QAAT/B,CAAkBgC,MAAlBhC,CAAyB,IAAzBA,CAAAA;IACD;EACF,CAAC,QAAO0C,EAAP,EAAW;IACXR,OAAO,CAACS,IAART,CAAa,uBAAA,GAA0BI,KAAK,CAACzC,IAAhC,GAAuC,IAAvC,GAA8C6C,EAA3DR,CAAAA;EACD;AACF,CAtBD,CAAA;AAwBA,CAAA,CAAA,EAAA,qBAAA,CAAA,SAAA,EAAU/B,WAAV,EAAuB,MAAMC,IAA7B,CAAA;AACA,CAAA,CAAA,EAAA,KAAA,CAAA,cAAA,EAAA,CAAA","sourcesContent":["/* globals __webpack_hash__ */\nimport fetch from 'next/dist/build/polyfills/unfetch'\nimport EventSourcePolyfill from './event-source-polyfill'\nimport { getEventSourceWrapper } from './error-overlay/eventsource'\nimport { setupPing } from './on-demand-entries-utils'\nimport { displayContent } from './fouc'\n\nif (!window.EventSource) {\n  window.EventSource = EventSourcePolyfill\n}\n\nconst data = JSON.parse(document.getElementById('__NEXT_DATA__').textContent)\nlet { assetPrefix, page } = data\nassetPrefix = assetPrefix || ''\nlet mostRecentHash = null\n/* eslint-disable-next-line */\nlet curHash = __webpack_hash__\nconst hotUpdatePath =\n  assetPrefix + (assetPrefix.endsWith('/') ? '' : '/') + '_next/static/webpack/'\n\n// Is there a newer version of this code available?\nfunction isUpdateAvailable() {\n  // __webpack_hash__ is the hash of the current compilation.\n  // It's a global variable injected by Webpack.\n  /* eslint-disable-next-line */\n  return mostRecentHash !== __webpack_hash__\n}\n\n// Webpack disallows updates in other states.\nfunction canApplyUpdates() {\n  return module.hot.status() === 'idle'\n}\n\n// This function reads code updates on the fly and hard\n// reloads the page when it has changed.\nasync function tryApplyUpdates() {\n  if (!isUpdateAvailable() || !canApplyUpdates()) {\n    return\n  }\n  try {\n    const res = await fetch(`${hotUpdatePath}${curHash}.hot-update.json`)\n    const jsonData = await res.json()\n    const curPage = page === '/' ? 'index' : page\n    // webpack 5 uses an array instead\n    const pageUpdated = (Array.isArray(jsonData.c)\n      ? jsonData.c\n      : Object.keys(jsonData.c)\n    ).some((mod) => {\n      return (\n        mod.indexOf(\n          `pages${curPage.substr(0, 1) === '/' ? curPage : `/${curPage}`}`\n        ) !== -1 ||\n        mod.indexOf(\n          `pages${\n            curPage.substr(0, 1) === '/' ? curPage : `/${curPage}`\n          }`.replace(/\\//g, '\\\\')\n        ) !== -1\n      )\n    })\n\n    if (pageUpdated) {\n      document.location.reload(true)\n    } else {\n      curHash = mostRecentHash\n    }\n  } catch (err) {\n    console.error('Error occurred checking for update', err)\n    document.location.reload(true)\n  }\n}\n\ngetEventSourceWrapper({\n  path: `${assetPrefix}/_next/webpack-hmr`,\n}).addMessageListener((event) => {\n  if (event.data === '\\uD83D\\uDC93') {\n    return\n  }\n\n  try {\n    const message = JSON.parse(event.data)\n\n    if (message.action === 'sync' || message.action === 'built') {\n      if (!message.hash) {\n        return\n      }\n      mostRecentHash = message.hash\n      tryApplyUpdates()\n    } else if (message.action === 'reloadPage') {\n      document.location.reload(true)\n    }\n  } catch (ex) {\n    console.warn('Invalid HMR message: ' + event.data + '\\n' + ex)\n  }\n})\n\nsetupPing(assetPrefix, () => page)\ndisplayContent()\n"]},"metadata":{},"sourceType":"script"}