{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = initHeadManager;\nvar _react = require(\"react\");\nconst DOMAttributeNames = {\n  acceptCharset: 'accept-charset',\n  className: 'class',\n  htmlFor: 'for',\n  httpEquiv: 'http-equiv'\n};\nfunction reactElementToDOM(_ref) {\n  let {\n    type,\n    props\n  } = _ref;\n  const el = document.createElement(type);\n  for (const p in props) {\n    if (!props.hasOwnProperty(p)) continue;\n    if (p === 'children' || p === 'dangerouslySetInnerHTML') continue; // we don't render undefined props to the DOM\n    if (props[p] === undefined) continue;\n    const attr = DOMAttributeNames[p] || p.toLowerCase();\n    el.setAttribute(attr, props[p]);\n  }\n  const {\n    children,\n    dangerouslySetInnerHTML\n  } = props;\n  if (dangerouslySetInnerHTML) {\n    el.innerHTML = dangerouslySetInnerHTML.__html || '';\n  } else if (children) {\n    el.textContent = typeof children === 'string' ? children : Array.isArray(children) ? children.join('') : '';\n  }\n  return el;\n}\nfunction updateElements(elements, components, removeOldTags) {\n  const headEl = document.getElementsByTagName('head')[0];\n  const oldTags = new Set(elements);\n  components.forEach(tag => {\n    if (tag.type === 'title') {\n      let title = '';\n      if (tag) {\n        const {\n          children\n        } = tag.props;\n        title = typeof children === 'string' ? children : Array.isArray(children) ? children.join('') : '';\n      }\n      if (title !== document.title) document.title = title;\n      return;\n    }\n    const newTag = reactElementToDOM(tag);\n    const elementIter = elements.values();\n    while (true) {\n      // Note: We don't use for-of here to avoid needing to polyfill it.\n      const {\n        done,\n        value\n      } = elementIter.next();\n      if (value == null ? void 0 : value.isEqualNode(newTag)) {\n        oldTags.delete(value);\n        return;\n      }\n      if (done) {\n        break;\n      }\n    }\n    elements.add(newTag);\n    headEl.appendChild(newTag);\n  });\n  oldTags.forEach(oldTag => {\n    if (removeOldTags) {\n      oldTag.parentNode.removeChild(oldTag);\n    }\n    elements.delete(oldTag);\n  });\n}\nfunction initHeadManager(initialHeadEntries) {\n  const headEl = document.getElementsByTagName('head')[0];\n  const elements = new Set(headEl.children);\n  updateElements(elements, initialHeadEntries.map(_ref2 => {\n    let [type, props] = _ref2;\n    return /*#__PURE__*/(0, _react.createElement)(type, props);\n  }), false);\n  let updatePromise = null;\n  return {\n    mountedInstances: new Set(),\n    updateHead: head => {\n      const promise = updatePromise = Promise.resolve().then(() => {\n        if (promise !== updatePromise) return;\n        updatePromise = null;\n        updateElements(elements, head, true);\n      });\n    }\n  };\n}","map":null,"metadata":{},"sourceType":"script"}